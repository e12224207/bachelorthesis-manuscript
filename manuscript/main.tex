\documentclass[11pt]{report}
\usepackage[paper=a4paper,margin=2.5cm]{geometry}
\usepackage[outputdir=out, newfloat]{minted}
\usepackage{multicol}
\usepackage{fontspec}

% Point fontspec at your local fonts folder:
\setmainfont{EBGaramon}[
  Path      = font/,       % relative to main.tex
  Extension = .ttf,
  UprightFont    = *d12-Regular,   % MyFont-Regular.ttf
  BoldFont       = *d08-Regular,       % MyFont-Bold.ttf
  ItalicFont     = *d12-Italic,
  BoldItalicFont = *d08-Italic
]

\usepackage{forest}
\usepackage{microtype}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage[colorlinks,linkcolor=blue,urlcolor=cyan]{hyperref}
\usepackage{caption}
\usepackage{titlesec}
\titleformat{\chapter}[hang]{\normalfont\huge\bfseries}{}{0pt}{}
\titlespacing*{\chapter}{0pt}{1.5em}{1em}
%=== Metadata ===
\newcommand{\thesistitle}{Your Thesis Title Here}
\newcommand{\authorname}{Rafael Tanzer}
\newcommand{\supervisor}{Michele Chiaria, Simone , Francesco Pontigia and Ezzio Bartocci}
\newcommand{\institution}{TU Vienna}
\newcommand{\department}{Cyber-Physical-Systems, ..., ...}
\newcommand{\logoimage}{graphics/logo.png} % Path to your logo image
\newcommand{\submissionmonth}{May}
\newcommand{\submissionyear}{2025}
%================

\usepackage[backend=biber, style=numeric]{biblatex}
\addbibresource{bibliography/theory.bib}
\addbibresource{bibliography/implementation.bib}
\usepackage{./simplebnf}
\def\code#1{\texttt{\detokenize{#1}}}

\begin{document}

\begin{titlepage}
  \centering
  \vspace*{1cm}

  % University logo
  \includegraphics[width=0.25\textwidth]{graphics/tuWienLogo.png}
  \\[1cm]

  % Thesis title
  {\Huge \thesistitle\\[1.5cm]}

  % Project logo under title, smaller size
  \includegraphics[width=0.15\textwidth]{\logoimage}\\[1cm]

  % Author\maketitle
  {\Large \authorname\\[0.5cm]}

  % Department and institution
  {\large \department\\
  \institution\\[1.5cm]}

  % Supervisor
  {\large Supervisor: \supervisor\\[2cm]}

  % Submission date
  {\large \submissionmonth~\submissionyear\\}

  \vfill

  % Bottom of the page
  \vspace*{0.5cm}
  {\small This thesis is submitted in partial fulfillment of the requirements for the degree of \textit{Bachelor of Science}.}

\end{titlepage}


\begin{abstract}
  % Your abstract text here.
  all slash code coantined text hs to be revisted due to the detokenize
\end{abstract}

\tableofcontents


%=== Part I - Foundations ===%
\begin{refsection}
  \part{Foundations}
  \include{part1}
\end{refsection}

%=== Part II - Design & Implementation ===%
\begin{refsection}
  \part{Design \& Implementation}
  \include{part2}
\end{refsection}

%=== References ===%
\cleardoublepage
\printbibliography[heading=subbibliography,title={Foundations},section=1]
\printbibliography[heading=subbibliography,title={Technological Implementation},section=2]

%\printbibliography

\appendix

\begin{bnf}
  $prog$ : \textsf{Program} ::=
  | $decl\_list\; func\; func\_list$
  ;;
  $decl$ : \textsf{Declaration} ::=
  | $type\; identifier\; id\_list$
  | $\epsilon$
  ;;
  $decl\_list$ ::=
  | $decl\; \code{;}\; decl\_list$
  | $\epsilon$
  ;;
  $id\_list$ ::=
  | \code{,}\; $identifier\; id\_list$
  | $\epsilon$
  ;;
  $func$ : \textsf{Function} ::=
  | $identifier\; \left(\; param\_list\; \right)\; \left\{\; decl\_list\; block\; \right\}$
  ;;
  $func\_call$ : \textsf{Func\-Call} ::=
  | $identifier\; \left(\; arg\_list\; \right)$
  ;;
  $arg$ : \textsf{Argument} ::=
  | $expr$
  ;;
  $arg\_list$ ::=
  | $arg\; arg\_list\_tail$
  | $\epsilon$
  ;;
  $arg\_list\_tail$ ::=
  | \code{,} $arg\; arg\_list\_tail$
  | $\epsilon$
  ;;
  $param$ : \textsf{Parameter} ::=
  | $type\;amp\_opt\;identifier$
  ;;
  $amp\_opt$ : \textsf{Value-result} ::=
  | \code{&}
  | $\epsilon$
  ;;
  $param\_list$ ::=
  | $param\;param\_list\_tail$
  | $\epsilon$
  ;;
  $param\_list\_tail$ ::=
  | \code{,} $param\;param\_list\_tail$
  | $\epsilon$
  ;;
  $block$ : \textsf{Codeblock} ::=
  | $stmt\; stmt\_list$
  ;;
  $block\_opt$ ::=
  | $block$
  | $\epsilon$
  ;;
  $stmt$ : \textsf{Statement} ::=
  | $assignment\;$ \code{;}
  | $query\;$ \code{;}
  | $observation\;$ \code{;}
  | $func\_call\;$ \code{;}
  | \code{throw} \code{;}
  | $if\_then\_else$
  | $while$
  | $try\_catch$
  ;;
  $stmt\_list$ ::=
  | $stmt\; stmt\_list$
  | $\epsilon$
  ;;
  $assignment$ ::=
  | $lval\; \code{=}\; assign\_rhs$
  ;;
  $assign\_rhs$  : \textsf{Right-hand side} ::=
  | $expr$
  | $distribution$
  ;;
  $query$ : \textsf{Query} ::=
  | \code{query} $func\_call$
  ;;
  $observation$ : \textsf{Conditioning} ::=
  | \code{observe} $expr$
  ;;
  $if\_then\_else$ : \textsf{IfThenElse} ::=
  | \code{if} $\left(\; expr\; \right) \left\{\; block\_opt\; \right\}$ \code{else} $\left\{\; block\_opt\; \right\}$
  ;;
  $while$ : \textsf{While-loop} ::=
  | \code{while} $\left(\; expr\; \right) \left\{\; block\_opt\; \right\}$
  ;;
  $try\_catch$ : \textsf{Try-catch}::=
  | \code{try} $\left\{\; block\_opt\; \right\} \code{catch} \left\{\; block\_opt\; \right\}$
\end{bnf}

\pagebreak

\begin{bnf}
  $lval$ : \textsf{Left-hand value} ::=
  | $identifier\;\left[\;expr\;\right]$
  | $identifier$
  ;;
  $distribution$ : \textsf{Sampling} ::=
  | \code{Bernoulli} $\left(\;expr\;\code{,}\;expr\;\right)$
  | \code{Uniform}   $\left(\;expr\;\code{,}\;expr\;\right)$
  ;;
  $expr$ : \textsf{Expression}::=
  | $logical\_or\;prob\_assign\_opt$
  ;;
  $prob\_assign\_opt$ ::=
  | $prob\_assign$
  | $\epsilon$
  ;;
  $prob\_assign$ : \textsf{Probabilistic Assignment} ::=
  | $prob\_choice\;expr$
  ;;
  $prob\_choice$ ::=
  | $\left\{\;expr\;\code{\:}\;expr\;\right\}$
  ;;
  $logical\_or$ ::=
  | $logical\_and\;logical\_or\_tail$
  ;;
  $logical\_or\_tail$ ::=
  | $\vert\vert\; logical\_and\;logical\_or\_tail$
  | $\epsilon$
  ;;
  $logical\_and$ ::=
  | $comparison\;logical\_and\_tail$
  ;;
  $logical\_and\_tail$ ::=
  | \code{&&} $comparison\;logical\_and\_tail$
  | $\epsilon$
  ;;
  $comparison$ ::=
  | $term\;comparison\_tail$
  ;;
  $comparison\_tail$ ::=
  | $comparison\_op\;term\;comparison\_tail$
  | $\epsilon$
  ;;
  $comparison\_op$ ::=
  | \code{>}
  | \code{>=}
  | \code{<}
  | \code{<=}
  | \code{==}
  | \code{!=}
  ;;
  $term$ ::=
  | $factor\;term\_tail$
  ;;
  $term\_tail$ ::=
  | \code{+} $factor\;term\_tail$
  | \code{-} $factor\;term\_tail$
  | $\epsilon$
  ;;
  $factor$ ::=
  | $division\;factor\_tail$
  ;;
  $factor\_tail$ ::=
  | \code{*} $division\;factor\_tail$
  | $\epsilon$
  ;;
  $division$ ::=
  | $unary\;division\_tail$
  ;;
  $division\_tail$ ::=
  | \code{/} $unary\;division\_tail$
  | \texttt{\%} $unary\;division\_tail$
  | $\epsilon$
  ;;
  $unary$ ::=
  | $unary\_op\;unary$
  | $primary$
  ;;
  $unary\_op$ ::=
  | \code{!}
  | \code{-}
  ;;
  $primary$ ::=
  | $bool$
  | $int\_literal$
  | $lval$
  | $\left(\;expr\;\right)$
\end{bnf}

\pagebreak

\begin{bnf}
  $identifier$ ::=
  | $letter\;ident\_tail$
  ;;
  $ident\_tail$ ::=
  | $letter\_or\_digit\;ident\_tail$
  | \code{.} $ident\_tail$
  | $\colon\; ident\_tail$
  | \code{~} $ident\_tail$
  | $\epsilon$
  ;;
  $letter$ ::=
  | \code{a}
  | \code{b}
  | …
  | \code{Z}
  | \code{_}
  ;;
  $digit$ ::=
  | \code{0}
  | …
  | \code{9}
  ;;
  $letter\_or\_digit$ ::=
  | $letter$
  | $digit$
  ;;
  $type$ ::=
  | \code{bool}
  | $int\_spec$
  | $int\_spec\;\left[\;int\_literal\;\right]$
  ;;
  $digit\_seq$ ::=
  | $digit\;digit\_seq$
  | $digit$
  ;;
  $int\_spec$ ::=
  | \code{u} $digit\_seq$
  | \code{s} $digit\_seq$
  ;;
  $int\_literal$ ::=
  | $digit\_seq\;int\_spec$
  ;;
  $bool$ ::=
  | \code{true}
  | \code{false}
\end{bnf}
\captionof{listing}{Backus-Naur form of MiniProb grammar}
\label{list:miniprob-bnf}

% Full Miniprob grammar here.

\chapter{Expanded Code Listings}
% Additional code excerpts.
\inputminted[linenos, breaklines]{yaml}{samples/mini-prob.langium}
\captionof{listing}{Langium grammar definition of MiniProb}
\label{list:langium-grammar}

\end{document}
